# vi 编辑器的使用技巧

`vi` 是一个非常经典的文本编辑器，最初由 Bill Joy 在 1976 年为 Unix 系统开发。尽管 `vi` 的界面和操作方式可能对初学者来说不太友好，但它仍然是许多系统管理员和开发者的重要工具，尤其是在没有图形界面的环境中。

## 1. `vi` 编辑器的基本模式
`vi` 编辑器主要有三种模式：
1. **命令模式（Normal Mode）**：这是 `vi` 启动时的默认模式。在这个模式下，你可以输入各种命令来移动光标、删除文本、复制粘贴等。
2. **插入模式（Insert Mode）**：在这个模式下，你可以输入文本。要进入插入模式，可以按 `i`、`a`、`o` 等键。
3. **底行模式（Ex Mode）**：在这个模式下，你可以输入更复杂的命令，如保存文件、退出编辑器等。要进入底行模式，可以按 `:` 键。

## 2. 启动 `vi` 编辑器
要启动 `vi` 编辑器并打开一个文件，可以使用以下命令：
```bash
vi filename.txt
```
## 3. 常用命令
### 3.1. **命令模式（Normal Mode）**
- **移动光标**：
  - `h`：向左移动一个字符。
  - `j`：向下移动一行。
  - `k`：向上移动一行。
  - `l`：向右移动一个字符。
  - `0`：移动到行首。
  - `^`：移动到行首的第一个非空白字符。
  - `$`：移动到行尾。
  - `w`：向前移动到下一个单词的开头。
  - `b`：向后移动到上一个单词的开头。
  - `e`：移动到当前单词的结尾。
  - `G`：移动到文件的最后一行。
  - `nG`：移动到文件的第 `n` 行。
  - `Ctrl + f`：向下翻页。
  - `Ctrl + b`：向上翻页。
- **删除文本**：
  - `x`：删除光标所在位置的字符。
  - `dd`：删除当前行。
  - `dw`：删除从光标位置到下一个单词开头的字符。
  - `d$`：删除从光标位置到行尾的字符。
  - `d0`：删除从光标位置到行首的字符。
  - `dG`：删除从当前行到文件末尾的所有行。
  - `:1,.-1d`：删除从文件开头到当前行的所有行。
  - `:5,10d`：删除第 5 行到第 10 行的所有行。
  - `:10d` 或 `:-10d`：删除当前行后第 10 行或当前行前第 10 行。
  - `:d10` 或 `:d-10`：删除当前行后 10 行或当前行前 10 行。

- **复制和粘贴**：
  - `yy`：复制当前行。
  - `yw`：复制从光标位置到下一个单词开头的字符。
  - `p`：在光标后粘贴复制的文本。
  - `P`：在光标前粘贴复制的文本。
- **撤销和重做**：
  - `u`：撤销上一次操作。
  - `Ctrl + r`：重做上一次被撤销的操作。
- **查找和替换**：
  - `/pattern`：向前搜索 `pattern`。
  - `?pattern`：向后搜索 `pattern`。
  - `n`：重复上一次搜索。
  - `N`：反向重复上一次搜索。
  - `:s/old/new/`：替换当前行中的第一个 `old` 为 `new`。
  - `:s/old/new/g`：替换当前行中的所有 `old` 为 `new`。
  - `:%s/old/new/g`：替换文件中所有 `old` 为 `new`。

### 3.2. **插入模式（Insert Mode）**
- `i`：在光标前插入文本。
- `a`：在光标后插入文本。
- `A`：在行尾插入文本。
- `I`：在行首插入文本。
- `o`：在当前行下方插入新行并进入插入模式。
- `O`：在当前行上方插入新行并进入插入模式。

### 3.3. **底行模式（Ex Mode）**
- `:w`：保存文件。
- `:q`：退出 `vi` 编辑器。
- `:wq` 或 `:x`：保存文件并退出。
- `:q!`：不保存文件并强制退出。
- `:e filename`：打开另一个文件。
- `:w filename`：将当前编辑的内容保存到另一个文件。
- `:set number`：显示行号。
- `:set nonumber`：取消显示行号。
- `:set nu`：显示行号（简